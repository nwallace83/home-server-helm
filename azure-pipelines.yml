# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

jobs:
  - job: API_Call
    pool:
      name: server
    steps:
    - task: InvokeRESTAPI@1
      inputs:
        connectionType: 'connectedServiceName'
        serviceConnection: 'webhook'
        method: 'POST'
        headers: |
          {
          "Content-Type":"application/json", 
          "PlanUrl": "$(system.CollectionUri)", 
          "ProjectId": "$(system.TeamProjectId)", 
          "HubName": "$(system.HostType)", 
          "PlanId": "$(system.PlanId)", 
          "JobId": "$(system.JobId)", 
          "TimelineId": "$(system.TimelineId)", 
          "TaskInstanceId": "$(system.TaskInstanceId)", 
          "AuthToken": "$(system.AccessToken)",
          "BuildID": "$(build.BuildId)"
          }
        waitForCompletion: 'false'
  - job: Wait
    pool:
      name: Default
    steps:
    - bash: |
        sleep 600
  - job: Wait2
    pool:
      name: Default
    steps:
    - bash: |
        sleep 600


# {
#   "records": [
#     {
#       "previousAttempts": [],
#       "id": "edf3fc79-bcb7-56b8-fb97-f2239be7c249",
#       "parentId": "96ac2280-8cb4-5df5-99de-dd2da759617d",
#       "type": "Checkpoint",
#       "name": "Checkpoint",
#       "startTime": "2024-08-13T02:15:57.2266667Z",
#       "finishTime": "2024-08-13T02:15:57.2266667Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 2,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": "Checkpoint"
#     },
#     {
#       "previousAttempts": [],
#       "id": "0a796982-df60-59b5-b2cd-2c44c5d15f2c",
#       "parentId": "96ac2280-8cb4-5df5-99de-dd2da759617d",
#       "type": "Phase",
#       "name": "Wait2",
#       "startTime": null,
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "pending",
#       "result": null,
#       "resultCode": null,
#       "changeId": 5,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 3,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 4,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/4"
#       },
#       "task": null,
#       "attempt": 1,
#       "identifier": "Wait2"
#     },
#     {
#       "previousAttempts": [],
#       "id": "8ea306e2-56b6-57fa-c75e-e9a47d1f9331",
#       "parentId": "0a796982-df60-59b5-b2cd-2c44c5d15f2c",
#       "type": "Job",
#       "name": "Wait2",
#       "startTime": null,
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "pending",
#       "result": null,
#       "resultCode": null,
#       "changeId": 10,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "queueId": 1,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": "Wait2.__default"
#     },
#     {
#       "previousAttempts": [],
#       "id": "96ac2280-8cb4-5df5-99de-dd2da759617d",
#       "parentId": null,
#       "type": "Stage",
#       "name": "__default",
#       "startTime": "2024-08-13T02:15:59.6833333Z",
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "inProgress",
#       "result": null,
#       "resultCode": null,
#       "changeId": 15,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": "__default"
#     },
#     {
#       "previousAttempts": [],
#       "id": "a65980cf-5f4a-5307-1c7c-9a8657bd6c99",
#       "parentId": "3ec2226d-e869-5b48-a3d6-0ffde890699f",
#       "type": "Task",
#       "name": "InvokeRESTAPI",
#       "startTime": "2024-08-13T02:15:59.6833333Z",
#       "finishTime": "2024-08-13T02:15:59.8733333Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 16,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 6,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/6"
#       },
#       "task": {
#         "id": "9c3e8943-130d-4c78-ac63-8af81df62dfb",
#         "name": "InvokeRESTAPI",
#         "version": "1.220.0"
#       },
#       "attempt": 1,
#       "identifier": null
#     },
#     {
#       "previousAttempts": [],
#       "id": "3ec2226d-e869-5b48-a3d6-0ffde890699f",
#       "parentId": "8a77a381-8d3b-57dc-3688-c314566f21db",
#       "type": "Job",
#       "name": "API_Call",
#       "startTime": "2024-08-13T02:15:59.6833333Z",
#       "finishTime": "2024-08-13T02:16:00.03Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 17,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": "API_Call.__default"
#     },
#     {
#       "previousAttempts": [],
#       "id": "8a77a381-8d3b-57dc-3688-c314566f21db",
#       "parentId": "96ac2280-8cb4-5df5-99de-dd2da759617d",
#       "type": "Phase",
#       "name": "API_Call",
#       "startTime": "2024-08-13T02:15:59.6833333Z",
#       "finishTime": "2024-08-13T02:16:00.1533333Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 18,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 5,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/5"
#       },
#       "task": null,
#       "attempt": 1,
#       "identifier": "API_Call"
#     },
#     {
#       "previousAttempts": [],
#       "id": "ae27ddf8-f2a7-55b9-39f7-a07ecdac0860",
#       "parentId": "96ac2280-8cb4-5df5-99de-dd2da759617d",
#       "type": "Phase",
#       "name": "Wait",
#       "startTime": "2024-08-13T02:16:08.34Z",
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "inProgress",
#       "result": null,
#       "resultCode": null,
#       "changeId": 19,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": null,
#       "order": 2,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 3,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/3"
#       },
#       "task": null,
#       "attempt": 1,
#       "identifier": "Wait"
#     },
#     {
#       "previousAttempts": [],
#       "id": "1c69a038-85d7-598e-0cea-ba0cf6c420f8",
#       "parentId": "ae27ddf8-f2a7-55b9-39f7-a07ecdac0860",
#       "type": "Job",
#       "name": "Wait",
#       "startTime": "2024-08-13T02:16:08.34Z",
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": 0,
#       "state": "inProgress",
#       "result": null,
#       "resultCode": null,
#       "changeId": 19,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": "azure-azure-devops-agent-7b5b6d4d8c-85694",
#       "queueId": 1,
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": "Wait.__default"
#     },
#     {
#       "previousAttempts": [],
#       "id": "7aa2ca44-beb2-4b60-9086-b10841f27b02",
#       "parentId": "1c69a038-85d7-598e-0cea-ba0cf6c420f8",
#       "type": "Task",
#       "name": "Post-job: Checkout nwallace83/home-server-helm@main to s",
#       "startTime": null,
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": 0,
#       "state": "pending",
#       "result": null,
#       "resultCode": null,
#       "changeId": 21,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": "azure-azure-devops-agent-7b5b6d4d8c-85694",
#       "order": 4,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": null,
#       "attempt": 1,
#       "identifier": null
#     },
#     {
#       "previousAttempts": [],
#       "id": "e868b472-2e13-55cd-54ac-57c9aaa7a6ab",
#       "parentId": "1c69a038-85d7-598e-0cea-ba0cf6c420f8",
#       "type": "Task",
#       "name": "Bash",
#       "startTime": "2024-08-13T02:16:17.4633333Z",
#       "finishTime": null,
#       "currentOperation": null,
#       "percentComplete": 0,
#       "state": "inProgress",
#       "result": null,
#       "resultCode": null,
#       "changeId": 23,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": "azure-azure-devops-agent-7b5b6d4d8c-85694",
#       "order": 3,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": null,
#       "task": {
#         "id": "6c731c3c-3c68-459a-a5c9-bde6e6595b5b",
#         "name": "Bash",
#         "version": "3.241.1"
#       },
#       "attempt": 1,
#       "identifier": null
#     },
#     {
#       "previousAttempts": [],
#       "id": "ff6cf24a-7c72-4f69-bd1d-f50e2055d9ac",
#       "parentId": "1c69a038-85d7-598e-0cea-ba0cf6c420f8",
#       "type": "Task",
#       "name": "Initialize job",
#       "startTime": "2024-08-13T02:16:09.9333333Z",
#       "finishTime": "2024-08-13T02:16:10.35Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 23,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": "azure-azure-devops-agent-7b5b6d4d8c-85694",
#       "order": 1,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 7,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/7"
#       },
#       "task": null,
#       "attempt": 1,
#       "identifier": null
#     },
#     {
#       "previousAttempts": [],
#       "id": "818befed-9ffe-5775-7057-3b408ef25dac",
#       "parentId": "1c69a038-85d7-598e-0cea-ba0cf6c420f8",
#       "type": "Task",
#       "name": "Checkout nwallace83/home-server-helm@main to s",
#       "startTime": "2024-08-13T02:16:10.4333333Z",
#       "finishTime": "2024-08-13T02:16:17.4633333Z",
#       "currentOperation": null,
#       "percentComplete": null,
#       "state": "completed",
#       "result": "succeeded",
#       "resultCode": null,
#       "changeId": 24,
#       "lastModified": "0001-01-01T00:00:00",
#       "workerName": "azure-azure-devops-agent-7b5b6d4d8c-85694",
#       "order": 2,
#       "details": null,
#       "errorCount": 0,
#       "warningCount": 0,
#       "url": null,
#       "log": {
#         "id": 8,
#         "type": "Container",
#         "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/logs/8"
#       },
#       "task": null,
#       "attempt": 1,
#       "identifier": null
#     }
#   ],
#   "lastChangedBy": "c4928020-9021-4f8a-b97a-7bd708b74048",
#   "lastChangedOn": "2024-08-13T02:16:19.947Z",
#   "id": "28c6d4f6-359c-4e0a-8e0b-c3ac8b0dc598",
#   "changeId": 24,
#   "url": "https://dev.azure.com/nathanwallace114/591c3275-d3c8-40d6-812c-be4b62651a44/_apis/build/builds/20/Timeline/28c6d4f6-359c-4e0a-8e0b-c3ac8b0dc598"
# }
