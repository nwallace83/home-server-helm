apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: {{ .Release.Name }}-postgresql-password
  namespace: harbor
spec:
  vaultAuthRef: vault-auth
  mount: kv
  type: kv-v2
  path:  {{ .Release.Name }}/postgresql-password
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: {{ .Release.Name }}-postgresql-password
---
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: {{ .Release.Name }}-postgresql-minio
  namespace: harbor
spec:
  vaultAuthRef: vault-auth
  mount: kv
  type: kv-v2
  path:  {{ .Release.Name }}/minio-credentials
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: {{ .Release.Name }}-postgresql-minio
---
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: {{ .Release.Name }}-admin
  namespace: harbor
spec:
  vaultAuthRef: vault-auth
  mount: kv
  type: kv-v2
  path:  {{ .Release.Name }}/admin
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: {{ .Release.Name }}-admin