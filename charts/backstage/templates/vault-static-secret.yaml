apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: backstage-postgresql-password
  labels:
    {{- include "commonLabels" . | nindent 4 }}
spec:
  mount: kv
  type: kv-v2
  path:  backstage/postgresql-password
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: backstage-postgresql-password

---

apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: backstage-minio-credentials
  labels:
    {{- include "commonLabels" . | nindent 4 }}
spec:
  mount: kv
  type: kv-v2
  path:  backstage/minio-credentials
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: backstage-minio-credentials

---

apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: {{ printf "%s-secrets" .Release.Name }}
  labels:
    {{- include "commonLabels" . | nindent 4 }}
spec:
  mount: kv
  type: kv-v2
  path:  {{ printf "%s/%s-secrets" .Release.Name .Release.Name }}
  refreshAfter: 60s
  destination:
    create: true
    overwrite: true
    name: {{ printf "%s-secrets" .Release.Name }}