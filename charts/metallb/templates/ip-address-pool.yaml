{{- range .Values.adresses }}
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: {{ regexReplaceAll "/[0-9]{1,3}" . "" }}
  labels:
    {{- include "commonLabels" . | nindent 4 }}
    {{- toYaml .Values.commonLabels | nindent 4 }}
spec:
  addresses:
  - {{ . }}
  autoAssign: false
  avoidBuggyIPs: false
---
{{- end }}