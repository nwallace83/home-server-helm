apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: bazarr
spec:
  interval: 1m
  chart:
    spec:
      chart: ./charts/bazarr
      sourceRef:
        kind: GitRepository
        name: home-server
        namespace: {{ .Release.namespace }}
      interval: 1m
  values:
    image: harbor.nwallace.io/docker-hub/linuxserver/bazarr:1.4.5
    ingress:
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        nginx.ingress.kubernetes.io/ssl-redirect: 'true'
        nginx.ingress.kubernetes.io/limit-rps: "5"
      ingressClassName: nginx-ext
      host: bazarr.nwallace.io
    pvc:
      enabled: true
      size: 200Mi
      storageClassName: longhorn
    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: media
    volumeMounts:
      - name: media
        mountPath: /media
    resources:
      limits:
        memory: 2048M